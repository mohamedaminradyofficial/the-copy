# اختبارات الصفحات الحرجة (Smoke Tests)

هذا المجلد يحتوي على اختبارات حرجة (Smoke Tests) للتأكد من أن الصفحات الرئيسية في التطبيق تعمل بشكل صحيح.

## الهدف من هذه الاختبارات

1. **التأكد من عرض الصفحات بدون أخطاء 500**
2. **اختبار العناصر الأساسية في كل صفحة**
3. **فحص الأداء والسرعة**
4. **اكتشاف المشاكل المبكرة**

## الصفحات المختبرة

- `/` - الصفحة الرئيسية
- `/arabic-creative-writing-studio` - ورشة الكتابة الإبداعية العربية
- `/directors-studio` - استوديو المخرجين
- `/cinematography-studio` - استوديو التصوير
- `/actorai-arabic` - استوديو الذكاء الاصطناعي للممثلين
- `/brainstorm` - صفحة العصف الذهني
- `/analysis/seven-stations` - تحليل المحطات السبع
- `/development` - صفحة التطوير
- `/editor` - محرر النصوص
- `/breakdown` - تحليل النصوص

## كيفية تشغيل الاختبارات

### تشغيل جميع الاختبارات الحرجة

```bash
npm test src/app/__smoke__/routes.smoke.test.ts
```

### تشغيل الاختبارات مع واجهة المستخدم

```bash
npm run test:ui
```

### تشغيل الاختبارات مع تقرير التغطية

```bash
npm run test:coverage
```

### تشغيل الاختبارات في وضع المراقبة

```bash
npm run test:watch
```

## أنواع الاختبارات

### 1. اختبار عرض الصفحات (Page Rendering Test)
- يتأكد من أن كل صفحة تحمل بدون أخطاء
- يفحص وجود العناصر الأساسية
- يتحقق من صحة HTML

### 2. اختبار عدم وجود أخطاء 500 (500 Error Test)
- يلتقط أخطاء الخادم (500 errors)
- يتحقق من عدم وجود أخطاء شبكة
- يتابع أخطاء التطبيق

### 3. اختبار الأداء (Performance Test)
- يقيس وقت تحميل كل صفحة
- يتأكد من أن الوقت مقبول (أقل من 5 ثواني)
- يراقب الأداء العام

## تشغيل اختبارات معينة

### اختبار صفحة واحدة فقط

```bash
npm test -- --grep "الصفحة الرئيسية"
```

### اختبار صفحة محددة

```bash
npm test -- --grep "ورشة الكتابة الإبداعية العربية"
```

## تفسير النتائج

### ✅ علامة النجاح
- الصفحة تعمل بشكل صحيح
- لا توجد أخطاء 500
- الوقت مقبول

### ❌ علامة الفشل
- خطأ في تحميل الصفحة
- أخطاء 500
- وقت تحميل طويل
- عناصر HTML مفقودة

## إضافة صفحات جديدة للاختبار

1. أضف المسار إلى قائمة `CRITICAL_ROUTES` في `routes.smoke.test.ts`
2. أضف الحالة المناسبة في switch statement
3. حدد العناصر المتوقعة في الصفحة
4. شغل الاختبارات للتأكد من صحتها

## إعداد CI/CD

هذه الاختبارات مناسبة لـ:
- **GitHub Actions**
- **GitLab CI**
- **Jenkins**
- **أي نظام CI/CD آخر**

يمكن تشغيلها في مرحلة البناء قبل النشر:

```yaml
- name: Run Smoke Tests
  run: npm test src/app/__smoke__/routes.smoke.test.ts
```

## استكشاف الأخطاء

### خطأ: "Failed to import page"
- تأكد من وجود الملف في المسار الصحيح
- تحقق من تصدير المكون بشكل صحيح
- تأكد من استخدام المسار الصحيح في switch statement

### خطأ: "Page renders with empty content"
- تحقق من أن المكون يحتوي على محتوى
- تأكد من عدم وجود أخطاء في التكوين
- راجع console logs للحصول على تفاصيل إضافية

### خطأ: "Page takes too long to render"
- قد يكون هناك مشكلة في تحميل البيانات
- تحقق من الاستعلامات (queries) غير الضرورية
- راجع مكونات التحميل (loading components)

## التحديث والصيانة

- راجع الاختبارات عند إضافة صفحات جديدة
- حدث قائمة الصفحات الحرجة بانتظام
- راجع أوقات الأداء وأهداف التحسين
- احتفظ بتوثيق شامل للتغييرات

---

**ملاحظة**: هذه الاختبارات هي اختبارات أولية ولا تغني عن اختبارات الوحدة والاختبارات المتكاملة الشاملة.